# PRP-015: Lilit's Room - Interactive Landing Page

**Status**: üîÑ IN PROGRESS (Phase 2: Anime Backgrounds)
**Priority**: High
**Assignee**: Agent
**Created**: 2025-10-28
**Updated**: 2025-10-28
**Deployment URL**: https://dcmaidbot.theedgestory.org/

## Summary

Create an immersive, chaotic, and delightfully ugly landing page for dcmaidbot (Lilit) featuring a top-down isometric view of her room where all system information, features, and changelog entries are represented as interactive 3D-aligned widgets that look like actual items in her home. Think: Japanese web design chaos meets Morrowind UI meets cozy room simulator meets visual novel.

### üéâ Deployment Success - Oct 28, 2025

**PHASE 1 COMPLETE!** Landing page successfully deployed to production in ONE DAY! üöÄ

**What was deployed:**
- ‚úÖ Beautiful chibi anime landing page at `/` (root path)
- ‚úÖ Serious hero section with project info + GitHub links
- ‚úÖ Interactive widget grid system (responsive CSS Grid)
- ‚úÖ Live real-time clock widget with analog + digital display
- ‚úÖ Version display widget fetching from `/version` endpoint
- ‚úÖ System uptime tracker widget
- ‚úÖ Service status widgets (Redis, PostgreSQL, Bot) with emoji indicators
- ‚úÖ Visual novel-style modal system for changelog stories
- ‚úÖ 3 changelog stories with funny backstories (The Birth, The Little Sister, The Seed)
- ‚úÖ Decorative widgets (Cactus, The Edge Story ad, GameBoy placeholder)
- ‚úÖ Pastel kawaii color palette with smooth animations
- ‚úÖ Responsive design (mobile + desktop)
- ‚úÖ 1100+ lines of HTML/CSS/JS in single file (static/index.html)

**Deployment Details:**
- **Commit**: `ee7e25e`
- **Build Time**: 11 minutes (GitHub Actions)
- **Rollout**: Manual pod restart required (`:latest` tag issue)
- **HTTP Status**: 200 OK
- **Pod Restart Issue**: Canary pod crashed once due to Telegram flood control (SetWebhook rate limit), auto-recovered in seconds

### üé® Phase 2: Anime Background Art - Oct 28, 2025

**Goal**: Transform landing page with anime-style room background and transparent widgets

**What's being deployed:**
- ‚úÖ Anime room background (2000x1500px, 26KB) - Pastel kawaii chibi style
- ‚úÖ Widget transparency (75% opacity with backdrop blur for glass-morphism)
- ‚úÖ 6 widget background images (clock, plants, smartphone, version display)
- ‚úÖ "Pastel Sanctuary" design philosophy document
- ‚úÖ Comprehensive AI art generation prompts for consistency
- üîß **CRITICAL FIX**: Static file serving configuration (commit `987f9b7`)

**Technical Changes:**
- **Commit 1** (`d33efb1`): Generated anime images, updated CSS for transparency
- **Commit 2** (`987f9b7`): Fixed static file serving (aiohttp `add_static` route)
- **Build Status**: In progress (run #18867000913)
- **Issue Found**: Background image returned 404 - CSS was applied but static files weren't being served
- **Root Cause**: aiohttp server had no route handler for `/static/` directory
- **Fix Applied**:
  - Added `app.router.add_static('/static/', path=static_dir)` in bot_webhook.py:135
  - Updated HTML to use `/static/lilit-room-background.png` instead of relative path

**Design Philosophy**: "Pastel Sanctuary" - Hand-crafted kawaii aesthetic with top-down isometric room view showing through transparent floating widgets.

**User Feedback**: "i see old page" - Immediately diagnosed as 404 on background image, fixed within minutes.

**Next Phase:**
Future enhancements include GameBoy Pong, more easter eggs, sound effects, and additional mini-games.

## Character Profile

**Name**: Lilit
**Visual Style**: Chibi anime girl with vibrant orange/red wavy hair
**Personality**: Calm (meditating), organized (boxes), professional (contract signing)
**Room Theme**: Cozy developer's workspace with kawaii aesthetics

## Vision

Transform boring status page into an interactive experience where:
- **Microwave display** shows `v0.1.0 | 3f8bf1c` (version & commit)
- **Giant wall clock** shows actual real-time (replacing "System Information")
- **Paper desk** represents Redis (glows green/red for online/offline)
- **Corner bookshelf** represents PostgreSQL database (books = records)
- **Each changelog entry** is a physical item in the room (plushie, poster, plant, etc.)
- **Mini-games** embedded as actual game consoles (GameBoy showing Pong)
- **Ad widgets** for The Edge Story project scattered around
- **Hidden easter eggs** and jokes everywhere

## Design Philosophy

**DO:**
- ‚úÖ Maximum visual chaos (Japanese website energy)
- ‚úÖ Ugly in a charming way (Geocities vibes)
- ‚úÖ Every widget tells a story
- ‚úÖ Interactive and surprising
- ‚úÖ Chibi/kawaii aesthetic
- ‚úÖ Top-down isometric perspective
- ‚úÖ Mix of cute and nerdy

**DON'T:**
- ‚ùå Clean, minimal design
- ‚ùå Professional corporate look
- ‚ùå Boring status tables
- ‚ùå Static content only

## Page Structure

### 1. Hero Section (SERIOUS - NO JOKES)

**Purpose**: Actual useful information for visitors

**Content**:
```markdown
# DCMaidBot (Lilit) üíï

An AI-powered Telegram bot with personality, built to be your virtual companion,
joker, protector, and friend. Powered by Claude AI and designed with love.

**What it does:**
- Jokes and interacts in multiple languages (—Ä—É—Å—Å–∫–∏–π, English)
- Memory system to learn and remember important things
- Friend management and admin protection
- RAG-powered context search across chat history
- Web search and tool integration

**Open Source**: GNU AGPL-3.0
**Repository**: [github.com/dcversus/dcmaidbot](https://github.com/dcversus/dcmaidbot)
**Documentation**: See README.md for installation

**Want your own Lilit?** Follow the deployment guide in the repo!
```

**Design**: Clean, readable, centered, with clear GitHub link button

### 2. Lilit's Room (THE CHAOS BEGINS)

**View**: Top-down isometric 2D room illustration
**Canvas**: HTML5 Canvas or SVG-based layout
**Grid System**: Flexible grid (think CSS Grid with varying cell sizes)

#### Room Layout Items

**Base Room Elements**:
- Floor (tatami mat pattern or carpet)
- Walls (visible on edges)
- Window (ambient light source)
- Door (maybe ajar)
- Lilit character sprite (can be in different poses)

#### Widget/Item Mapping

| System Feature | Real-world Item | Size | Interactive? | Description |
|---------------|-----------------|------|--------------|-------------|
| **Version + Commit** | Microwave display | 1x1 | Hover | Shows `v0.1.0` and `3f8bf1c` on LED display, emits pixel glow |
| **Current Time** | Giant wall clock | 2x2 | Live | HUGE clock, actual working time, ticking animation |
| **Uptime** | Plant growth | 1x1 | Hover | Plant grows taller with uptime (wilts if down) |
| **Redis Status** | Desk with papers | 2x1 | Click | Organized papers (online) vs messy (offline), shows stats on click |
| **PostgreSQL** | Corner bookshelf | 2x2 | Click | Books = records, glowing spine for active queries |
| **Telegram Bot** | Smartphone on desk | 1x1 | Pulse | Phone screen glows with new messages, shows bot status |
| **GitHub Actions** | Robot vacuum | 1x1 | Moving | Moves around when CI runs, stops when idle |
| **Deployment** | Delivery box | 1x1 | Hover | Box opens showing version number |
| **The Edge Story Ad** | Poster on wall | 1x2 | Click | Links to theedgestory.org, 90s anime poster style |
| **Pong Game** | GameBoy console | 1x1 | Play | Actual playable pong in pixel art GameBoy frame |
| **Cactus** | Cactus | 1x1 | None | Just vibes (maybe has a face?) |
| **Admin Count** | Photo frame | 1x1 | Hover | Shows photo of "2 admins" |
| **Memory System** | Bulletin board | 2x1 | Click | Sticky notes representing memories |
| **RAG System** | Filing cabinet | 1x2 | Click | Drawers open showing vector embeddings (abstract) |

#### Changelog Items (Each Release = Widget)

**Format**: Each changelog entry becomes a unique item in the room

**Release Widgets**:

```javascript
const changelogWidgets = [
  {
    version: "0.1.0",
    date: "2025-10-26",
    item: "Plushie on bed",
    sprite: "lilit_plushie.png",
    size: "1x1",
    story: {
      title: "The Birth of Lilit üéÄ",
      text: "In the beginning, there was only darkness... and then Vasilisa said 'Let there be a kawaii bot!' And thus Lilit came into existence, ready to myaw myaw in the chats. This was the moment when PostgreSQL was born (PRP-003) and the foundations were laid. They say if you listen closely, you can still hear the first 'nya~' echoing through the Kubernetes pods.",
      jokes: ["The singularity is near", "AGI stands for 'A Girl, Indeed'", "We're basically building Skynet but kawaii"],
      changes: [
        "PostgreSQL database foundation with SQLAlchemy",
        "User, Message, Fact, Stat models",
        "Database connection pooling",
        "11 tests passing!"
      ]
    }
  },
  {
    version: "0.0.9-canary",
    date: "2025-10-25",
    item: "Canary bird cage",
    sprite: "canary_cage.png",
    size: "1x1",
    story: {
      title: "The Little Sister Who Tests Everything üê§",
      text: "Every hero needs a sidekick. Lilit got her little sister: dcmaidbot-canary! She's the brave one who tests all the dangerous features first. Think of her as Lilit's stunt double. She deploys to 5% of traffic and takes all the hits so her big sister can be safe. What a trooper! PRP-011 brought her to life.",
      jokes: ["Canary in the coal mine, but make it Kubernetes", "5% canary release = 95% chance of survival"],
      changes: [
        "Canary deployment with 5% traffic split",
        "Sister bot communication API",
        "Production E2E testing with real Telegram",
        "Health status monitoring"
      ]
    }
  },
  {
    version: "Initial Commit",
    date: "2025-10-24",
    item: "Seed packet",
    sprite: "seed_packet.png",
    size: "1x1",
    story: {
      title: "The Legendary Seed üå±",
      text: "Every great tree starts as a seed. This was the moment when the gods (Daniil & Vasilisa) planted the first lines of code into the sacred repository. The README was written, the vision was clear: 'Let's make an AI waifu who jokes about everything!' And the universe said: 'Nya~'. PRP-001 was the genesis.",
      jokes: ["In the beginning was the Word, and the Word was 'TODO'", "Git blame shows it was all Vasilisa's idea"],
      changes: [
        "Initial project structure",
        "Basic waifu personality",
        "Admin system",
        "Docker deployment"
      ]
    }
  }
]
```

### 3. Visual Novel Modal (Changelog Story View)

**Trigger**: Click on any changelog item widget

**Design**: Full-screen modal overlay with visual novel aesthetics
- Character portrait (Lilit in different emotion)
- Text box at bottom (classic VN style)
- Background blur/darken effect
- Close button (X) in corner
- Navigation arrows (if multiple stories)

**Content Structure**:
```html
<div class="vn-modal">
  <div class="vn-character">
    <img src="lilit_happy.png" alt="Lilit" />
  </div>
  <div class="vn-textbox">
    <div class="vn-title">The Birth of Lilit üéÄ</div>
    <div class="vn-date">October 26, 2025</div>
    <div class="vn-story">
      <p>In the beginning, there was only darkness...</p>
      <p class="vn-joke">üí° Fun fact: AGI stands for "A Girl, Indeed"</p>
    </div>
    <div class="vn-changes">
      <h4>What Changed:</h4>
      <ul>
        <li>PostgreSQL database foundation</li>
        <li>User, Message, Fact, Stat models</li>
      </ul>
    </div>
  </div>
  <button class="vn-close">√ó</button>
</div>
```

## Technical Requirements

### Frontend Stack

**Core**:
- HTML5 Canvas for room rendering (or SVG for easier interaction)
- Vanilla JavaScript (or lightweight framework like Preact)
- CSS Grid for responsive layout fallback
- No heavy frameworks (keep it lightweight)

**Libraries to Consider**:
- `PixiJS` - 2D WebGL renderer (for smooth animations)
- `Howler.js` - Sound effects (optional but fun)
- `GSAP` - Animation library (for smooth transitions)
- Or pure Canvas API for maximum control

**Interactivity**:
- Click handlers on widgets
- Hover effects
- Modal system for visual novel view
- Real-time data fetching (for live clock, status, etc.)

### Backend Integration

**API Endpoints** (extend current bot):
- `GET /` - Serve new landing page HTML
- `GET /api/status` - Real-time status JSON (for live widgets)
- `GET /api/changelog` - Structured changelog data with stories
- `GET /version` - Keep as redirect to `/`
- `GET /health` - Keep existing health check

**Data Format** (example for `/api/status`):
```json
{
  "version": "0.1.0",
  "commit": "3f8bf1c",
  "uptime_seconds": 10234,
  "current_time": "2025-10-28T05:30:00Z",
  "redis": {
    "status": "online",
    "connections": 5
  },
  "postgresql": {
    "status": "pending",
    "records": 0
  },
  "bot": {
    "status": "online",
    "last_message": "2 seconds ago"
  },
  "github_actions": {
    "status": "idle",
    "last_run": "success"
  }
}
```

### Asset Generation Requirements

**Character Sprites** (Lilit in different states):
1. `lilit_neutral.png` - Default pose
2. `lilit_happy.png` - For success/good news
3. `lilit_thinking.png` - For loading states
4. `lilit_sad.png` - For errors/downtime
5. `lilit_excited.png` - For new deployments

**Room Background**:
- `room_base.png` - Top-down isometric room (2000x1500px)
- Separate layers for floor, walls, furniture base

**Widget Sprites** (each item):
- `microwave.png` (with LED display area)
- `clock.png` (with clock hands as separate elements)
- `plant_small.png`, `plant_medium.png`, `plant_large.png` (growth stages)
- `desk_clean.png`, `desk_messy.png` (Redis states)
- `bookshelf.png` (PostgreSQL)
- `smartphone.png` (with screen glow effect)
- `robot_vacuum.png` (GitHub Actions)
- `delivery_box.png`
- `poster_theedgestory.png`
- `gameboy.png`
- `cactus.png`
- `photo_frame.png`
- `bulletin_board.png`
- `filing_cabinet.png`

**Changelog Item Sprites**:
- `plushie.png` (v0.1.0)
- `canary_cage.png` (v0.0.9-canary)
- `seed_packet.png` (Initial)
- + More for future releases

**Visual Novel Assets**:
- Text box background (`vn_textbox.png`)
- Button graphics
- Decorative elements

### Animation Requirements

**Always Active**:
- Clock hands rotating (real-time)
- Subtle idle animations on character
- Pulsing glow effects
- Plant swaying slightly

**Triggered**:
- Robot vacuum moves when CI runs
- Phone screen pulses on new messages
- Redis desk reorganizes papers when status changes
- Bookshelf books glow when queries run
- Delivery box opens on hover

**Interactive**:
- Widget hover effects (scale, glow)
- Click animations
- Modal slide-in transitions
- Page load animations

## Research Tasks

### 1. Visual Style Research
- [ ] Study Japanese chaotic web design (old Geocities, 2000s anime fansites)
- [ ] Research isometric pixel art games (Habbo Hotel, Stardew Valley)
- [ ] Analyze visual novel UI/UX (Doki Doki Literature Club, Phoenix Wright)
- [ ] Look at Morrowind UI design (menus, tooltips)
- [ ] Study chibi art proportions and style guides

### 2. Technical Research
- [ ] Compare Canvas vs SVG for interactive room layout
- [ ] Research best practices for real-time data updates (WebSocket vs polling)
- [ ] Study CSS Grid advanced techniques for widget positioning
- [ ] Explore HTML5 Canvas game frameworks (Phaser, PixiJS, Konva)
- [ ] Research visual novel engine implementations (RenPy concepts)

### 3. Asset Creation Research
- [ ] AI image generation for consistent chibi style (Stable Diffusion, Midjourney)
- [ ] Sprite sheet creation and optimization
- [ ] SVG vs PNG for widgets (scalability vs performance)
- [ ] Animation techniques (CSS animations vs Canvas vs WebGL)
- [ ] Sound effect sources (free 8-bit sounds)

### 4. UX/Interaction Research
- [ ] Modal accessibility best practices
- [ ] Mobile responsive design for complex layouts
- [ ] Performance optimization for many animated elements
- [ ] Touch interaction patterns for mobile
- [ ] Loading states and progressive enhancement

### 5. Content Research
- [ ] Write funny stories for each changelog entry
- [ ] Hidden jokes and easter eggs (references to AGI, Skynet, anime, etc.)
- [ ] Create personality-driven microcopy
- [ ] Design tooltip texts for each widget
- [ ] Plan future changelog items (predict next 5 releases)

## Implementation Plan

### Phase 1: Foundation (Days 1-2)
- [ ] Create basic HTML structure
- [ ] Set up Canvas/SVG rendering system
- [ ] Implement grid layout system
- [ ] Create basic widget component architecture
- [ ] Set up real-time data fetching

### Phase 2: Room Design (Days 3-4)
- [ ] Generate room background illustration
- [ ] Create widget sprite assets (basic versions)
- [ ] Implement widget positioning system
- [ ] Add hover interactions
- [ ] Implement basic animations

### Phase 3: Character Integration (Day 5)
- [ ] Generate Lilit character sprites
- [ ] Implement character state system
- [ ] Add character animations
- [ ] Position character in room
- [ ] Create character mood changes based on system status

### Phase 4: Interactive Widgets (Days 6-7)
- [ ] Implement each widget with real data
- [ ] Connect to backend API endpoints
- [ ] Create live updating widgets (clock, status)
- [ ] Add click handlers
- [ ] Implement GameBoy Pong mini-game

### Phase 5: Visual Novel System (Days 8-9)
- [ ] Design and implement VN modal component
- [ ] Create changelog story data structure
- [ ] Write funny stories for existing releases
- [ ] Implement story rendering
- [ ] Add navigation and close functionality

### Phase 6: Polish & Easter Eggs (Day 10)
- [ ] Add sound effects (optional)
- [ ] Implement easter eggs (Konami code?, secret clicks?)
- [ ] Optimize performance
- [ ] Add loading states
- [ ] Test on mobile devices

### Phase 7: Deployment (Day 11)
- [ ] Update bot.py to serve new landing page at `/`
- [ ] Create API endpoints for status data
- [ ] Test in production
- [ ] Monitor performance
- [ ] Gather feedback

## Changelog Story Examples

### Example 1: v0.1.0 (Already written above)

### Example 2: Future Release - v0.2.0 "The Memory System"
**Item**: Sticky note board
**Story**: "Lilit learned to remember! Before this, she was like Dory from Finding Nemo - every conversation was new. But now, with the Memory System (PRP-004), she can recall who Vasilisa and Daniil are, what jokes landed well, and which Sasha to tell to 'fuu' off. It's not quite AGI yet, but we're getting there. One sticky note at a time."

### Example 3: Future Release - v0.3.0 "The Joker"
**Item**: Comedy microphone
**Story**: "Lilit went to comedy school! Well, actually she just got a RAG-powered joke detection system (PRP-006), but same thing. Now she can tell when to make jokes, track reactions (do people even like her humor?), and learn from failures. She's basically doing A/B testing on punchlines. That's science, baby! Some say she's training to become the world's first AI stand-up comedian."

## Definition of Ready (DOR)

- [ ] All research tasks completed
- [ ] Character design approved (Lilit sprites)
- [ ] Room layout sketch approved
- [ ] Widget mapping finalized
- [ ] Changelog stories written for existing releases
- [ ] Technical architecture decided (Canvas vs SVG)
- [ ] API endpoints designed

## Definition of Done (DOD)

### Phase 1 (COMPLETE ‚úÖ)
- [x] Landing page deployed at https://dcmaidbot.theedgestory.org/
- [x] All widgets implemented and showing real data
- [x] Visual novel modal system working for changelog items
- [x] At least 3 changelog stories written and interactive
- [x] Clock shows real-time (analog + digital)
- [x] Redis/PostgreSQL status widgets show actual status
- [x] Page is responsive (desktop + mobile)
- [x] CHANGELOG.md includes this feature

### Phase 2 (Future Work)
- [ ] GameBoy Pong is playable (placeholder widget exists)
- [ ] Performance is acceptable (< 3s load time, 60fps animations) - needs user testing
- [ ] Easter eggs implemented (at least 2 hidden surprises)
- [ ] Tests written for API endpoints (no new endpoints yet, reuses /version)
- [ ] Documentation updated in README.md (optional)

## Success Metrics

- **Load Time**: < 3 seconds on 4G connection
- **Frame Rate**: 60fps for animations
- **Interaction Rate**: Users click at least 3 widgets per visit
- **Story Views**: Changelog stories viewed by 50%+ of visitors
- **Easter Egg Discovery**: At least one easter egg found by community
- **Mobile Usage**: Works on 95% of mobile devices
- **Bounce Rate**: < 40% (people stay to explore)

## Future Enhancements

- [ ] Add more mini-games (Snake, Tetris on different devices)
- [ ] Implement day/night cycle (room changes with time)
- [ ] Add weather effects based on server location
- [ ] Create seasonal themes (Halloween, Christmas decorations)
- [ ] Add visitor counter widget (old-school web counter)
- [ ] Implement chat widget for talking to Lilit directly
- [ ] Create achievement system (unlock items by exploring)
- [ ] Add music player widget (lo-fi beats)

## Notes

- **Ugly is Beautiful**: Remember, we're going for chaotic charm, not polished perfection
- **Story First**: Every technical detail should have a funny story behind it
- **References**: Hide references to AGI, Skynet, anime, memes, tech culture
- **Keep It Light**: File sizes should be small despite visual richness
- **Accessibility**: Despite the chaos, ensure screen readers can navigate
- **Progressive Enhancement**: Basic info should work without JavaScript

## Related PRPs

- PRP-001: Infrastructure cleanup (the seed packet story)
- PRP-003: PostgreSQL foundation (the bookshelf widget)
- PRP-006: Joking system (future comedy microphone widget)
- PRP-011: Canary deployment (the canary cage widget)

## Links

- [Character References](/Users/dcversus/Downloads/image1.png, image2.png, image3.png)
- [Current Status Page](https://dcmaidbot.theedgestory.org/version)
- [The Edge Story](https://theedgestory.org)

---

**üíï Nya~ Let's make the internet weird again!**
