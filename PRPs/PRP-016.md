# PRP-016: Animal Crossing Neighborhood Floor Continuity System

**Status**: üîÑ **Active Implementation**
**Priority**: üî¥ CRITICAL
**Assignee**: Agent
**Created**: 2025-11-02
**Updated**: 2025-11-02
**Branch**: friends-update

## üéØ Main Goal

Achieve seamless neighborhood floor continuity between connected locations using orthographic Animal Crossing style generation with proper inpainting for floor transitions and widget integration.

## üìÅ Files Working On

### Core Scripts
- `scripts/world_builder/*.py` - Main generation pipeline
- `static/index.html` and `static/index.js` for frontend application. existed one requre adjustments but as base ok, lets not double implementation and careful split html with js, and all layers/floors make real div with all widgets text content inside to keep clean SEO-friendly template, i suggest make `scripts/world_builder/viewer_builder.py` what will produce new `static/index.html` and `static/index.css` with fine tuned values, then `static/index.js` will focus on floor state switching (but with css overlay-transition animations) with widget class hover/click and canvas blending dynamic values for widgets. each widget should have own code in index.js AND `static/styles.css` WILL BE main style file we import in index.html template and use with all shared styles from here, lets index.css be responsible for only layer adjustments

### Configuration
- `static/world.json` - World configuration with detailed location descriptions, require extending

### Testing
- `tests/business/dod_validation/test_prp016_world_generation_llm_judge.py` - Complex tests to each pipeline step formal algorythm researched in THIS document. tests should compare expectations from this document steps of generation-expectation with visual llm comparison for each pipeline step. after all done we need aggregate all tmp file paths and judges detailed resolutions AND need return final judge llm with simple CoT thre steps cycle for confidence and reflection with spectial prompt, we need get MANY aspects and acceptance score from 0 to 100 AND THIS NOT WORKING IN CI! NOT WORKING FOR E2E PROD! ONLY MANUAL RUN THEN NEEDED!
- `tests/business/user_journeys/landing_visual_judge.py` - visual llm jusdge and world.json and prp comparison and resolution with three way acceptance score and different criterias, should use playwrite, screenshots, and make all actions and go through widget interations and scroll with e2e experience. for dev goes to dev instance in CI (should be deployed with kubectl to domain like dcmaidbot-dev.theedgestory.org and use local .env secrets to it as telegram bot token and provide exact same configuration with certificates like at dcmaidbot.theedgestory.org)
- ??? maybe more?

### Output
- `static/output/` - Generated base scenes and overlays
- `static/cache/` - Content-addressed cache system

## dod

## dor

## plans

## pre-release checklist

## post-release checklist

## research!
