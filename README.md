# ActivityBot - Telegram бот для выбора случайных активностей

Бот для создания пулов (категорий) активностей с механизмом справедливого случайного выбора с учётом пенальти.

## Возможности

- Создание и управление пулами (категориями) активностей
- Добавление активностей в пулы
- Система приглашений - только создатель пула может приглашать участников
- Случайный выбор активности с учётом справедливого распределения
- Система пенальти для равномерного использования активностей
- Работа только в личных сообщениях для защиты приватности

## Технические детали

Проект реализован на Python с использованием:
- aiogram 3.x - библиотека для Telegram Bot API
- pydantic - валидация данных
- pytest - тестирование

## Структура проекта

```
project-root/
├── bot.py                 # Основной файл запуска бота
├── handlers/
│   ├── categories.py      # Хендлеры управления пулами
│   ├── activities.py      # Хендлеры управления активностями
│   ├── selection.py       # Хендлеры выбора активностей
│   └── info.py            # Хендлеры получения информации
├── services/
│   ├── pool_service.py    # Бизнес-логика для управления пулами
│   ├── activity_service.py# Бизнес-логика для управления активностями
│   └── selection_service.py # Бизнес-логика выборов и пенальти
├── middlewares/
│   └── private_only.py    # Middleware для ограничения работы в ЛС
├── models/
│   └── data.py            # Описание структур данных
├── storage/
│   └── storage.json       # Хранилище данных JSON
├── tests/                 # Тесты проекта
│   ├── test_services.py
│   └── test_handlers.py
├── requirements.txt       # Python зависимости
└── .env                   # Переменные окружения
```

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd <repository-folder>
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл .env с данными вашего бота:
```
BOT_TOKEN=your_bot_token_here
```

4. Запустите бота:
```bash
python bot.py
```

## Команды бота

- `/start` - Начало работы с ботом
- `/help` - Показать справку
- `/create_pool` - Создать новый пул активностей
- `/join_pool` - Присоединиться к существующему пулу по коду приглашения
- `/invite` - Пригласить участника в пул (только для создателя пула)
- `/exit_pool` - Выйти из пула
- `/my_pools` - Показать ваши пулы
- `/add_activity` - Добавить активность в пул
- `/list_activities` - Показать активности в пуле
- `/select` - Выбрать случайную активность
- `/pool_info` - Показать информацию о пуле
- `/penalties` - Показать информацию о пенальти

## Разработка и тестирование

Для запуска тестов используйте:
```bash
pytest tests/
```

## Лицензия

MIT 