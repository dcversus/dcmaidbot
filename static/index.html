<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lilith (DCMaidBot) üíï - Your Kawaii AI Companion</title>
    <style>
        /* ============================================
           CHIBI ANIME KAWAII DESIGN SYSTEM
           Light, cute, and cartoon-style
           ============================================ */

        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&family=Patrick+Hand&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Kawaii Pastel Color Palette */
            --pink-light: #FFB3D9;
            --pink-main: #FF69B4;
            --pink-dark: #FF1493;
            --purple-light: #E6D5F5;
            --purple-main: #B8A4D4;
            --blue-light: #B8E6FF;
            --blue-main: #87CEEB;
            --orange-warm: #FFB347;
            --yellow-soft: #FFF5BA;
            --green-mint: #B4F5D0;
            --peach: #FFDAB9;
            --lavender: #E6E6FA;

            /* Neutrals */
            --white: #FFFFFF;
            --cream: #FFF9F0;
            --gray-light: #F5F5F5;
            --gray-mid: #CCCCCC;
            --gray-text: #666666;
            --black-soft: #333333;

            /* Shadows & Effects */
            --shadow-sm: 0 2px 8px rgba(255, 105, 180, 0.1);
            --shadow-md: 0 4px 16px rgba(255, 105, 180, 0.15);
            --shadow-lg: 0 8px 32px rgba(255, 105, 180, 0.2);
            --glow: 0 0 20px rgba(255, 182, 217, 0.6);

            /* Spacing */
            --space-xs: 0.5rem;
            --space-sm: 1rem;
            --space-md: 1.5rem;
            --space-lg: 2rem;
            --space-xl: 3rem;

            /* Border Radius */
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-round: 50%;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--lavender) 0%, var(--blue-light) 50%, var(--pink-light) 100%);
            color: var(--black-soft);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ============================================
           HERO SECTION - SERIOUS & INFORMATIVE
           ============================================ */

        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: var(--space-xl) var(--space-md);
            position: relative;
            background: var(--white);
            box-shadow: var(--shadow-lg);
        }

        .hero::before {
            content: 'üíï';
            position: absolute;
            top: 5%;
            left: 10%;
            font-size: 3rem;
            opacity: 0.2;
            animation: float 6s ease-in-out infinite;
        }

        .hero::after {
            content: 'üå∏';
            position: absolute;
            bottom: 10%;
            right: 10%;
            font-size: 3rem;
            opacity: 0.2;
            animation: float 8s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        .hero-content {
            max-width: 800px;
            text-align: center;
            background: linear-gradient(135deg, var(--pink-light) 0%, var(--purple-light) 100%);
            padding: var(--space-xl);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--pink-dark);
            margin-bottom: var(--space-md);
            text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.3);
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: var(--gray-text);
            margin-bottom: var(--space-lg);
            font-weight: 400;
        }

        .hero-description {
            font-size: 1.1rem;
            color: var(--black-soft);
            margin-bottom: var(--space-md);
            text-align: left;
            line-height: 1.8;
        }

        .hero-description strong {
            color: var(--pink-main);
            font-weight: 700;
        }

        .features-list {
            text-align: left;
            margin: var(--space-lg) 0;
            list-style: none;
        }

        .features-list li {
            margin: var(--space-sm) 0;
            padding-left: 2rem;
            position: relative;
            font-size: 1.05rem;
        }

        .features-list li::before {
            content: '‚ú®';
            position: absolute;
            left: 0;
            font-size: 1.2rem;
        }

        .hero-meta {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            flex-wrap: wrap;
            margin: var(--space-lg) 0;
        }

        .meta-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            background: var(--white);
            padding: var(--space-xs) var(--space-md);
            border-radius: var(--radius-lg);
            font-weight: 600;
            box-shadow: var(--shadow-sm);
            font-size: 0.95rem;
        }

        .meta-badge.license {
            color: var(--purple-main);
        }

        .meta-badge.version {
            color: var(--blue-main);
        }

        .cta-buttons {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            flex-wrap: wrap;
            margin-top: var(--space-xl);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-md) var(--space-xl);
            border-radius: var(--radius-lg);
            font-size: 1.1rem;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            box-shadow: var(--shadow-md);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--pink-main) 0%, var(--pink-dark) 100%);
            color: var(--white);
        }

        .btn-primary:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: var(--shadow-lg), var(--glow);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--pink-main);
            border: 2px solid var(--pink-main);
        }

        .btn-secondary:hover {
            background: var(--pink-main);
            color: var(--white);
            transform: translateY(-2px);
        }

        .scroll-hint {
            margin-top: var(--space-xl);
            font-size: 0.9rem;
            color: var(--gray-mid);
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* ============================================
           MULTI-ROOM SYSTEM - VERTICAL SCROLLING
           ============================================ */

        html {
            scroll-behavior: smooth;
            scroll-snap-type: y mandatory;
        }

        .room-container {
            min-height: 100vh;
            padding: var(--space-xl) var(--space-md);
            position: relative;
            scroll-snap-align: start;
            scroll-snap-stop: always;
        }

        /* Lilith's Room specific styling */
        #lilith-room {
            background: url('/static/lilith-room-background.png') center center / cover no-repeat, linear-gradient(180deg, var(--cream) 0%, var(--yellow-soft) 100%);
        }

        /* Parents' Room specific styling */
        #parents-room {
            background: linear-gradient(180deg, #1a1a2e 0%, #2d2d44 100%);
        }

        #parents-room .room-title {
            color: var(--pink-light);
        }

        #parents-room .room-subtitle {
            color: var(--lavender);
        }

        /* Kitchen specific styling */
        #kitchen-room {
            background: linear-gradient(180deg, #FFF9E6 0%, #FFE4B5 100%);
        }

        /* Pool specific styling */
        #pool-room {
            background: linear-gradient(180deg, #87CEEB 0%, #4682B4 100%);
        }

        #pool-room .room-title {
            color: var(--white);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        #pool-room .room-subtitle {
            color: var(--white);
            opacity: 0.9;
        }

        /* Garden specific styling */
        #garden-room {
            background: linear-gradient(180deg, #90EE90 0%, #228B22 100%);
        }

        #garden-room .room-title {
            color: var(--white);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
        }

        #garden-room .room-subtitle {
            color: var(--white);
            opacity: 0.95;
        }

        .room-title {
            text-align: center;
            font-size: 2.5rem;
            color: var(--pink-dark);
            margin-bottom: var(--space-lg);
            font-family: 'Patrick Hand', cursive;
            text-shadow: 2px 2px 0 var(--pink-light);
        }

        .room-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: var(--gray-text);
            margin-bottom: var(--space-xl);
            font-style: italic;
        }

        /* Room Grid Layout */
        .room-grid {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-md);
            padding: var(--space-md);
            background: rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(8px) brightness(0.7);
        }

        /* Widget Base Styles */
        .widget {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(10px);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.5);
        }

        .widget:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-lg), 0 0 30px rgba(255, 105, 180, 0.4);
            border-color: var(--pink-main);
        }

        .widget::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 182, 217, 0.2) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .widget:hover::before {
            opacity: 1;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.6;
            }
        }

        /* Widget Glow Effect on Hover */
        .widget::after {
            content: '';
            position: absolute;
            inset: -5px;
            background: linear-gradient(45deg, var(--pink-main), var(--pink-dark), var(--purple-main));
            border-radius: inherit;
            opacity: 0;
            z-index: -1;
            filter: blur(20px);
            transition: opacity 0.3s ease;
        }

        .widget:hover::after {
            opacity: 0.5;
        }

        /* ============================================
           EASTER EGG SYSTEM (Phase 2)
           ============================================ */

        .easter-egg-counter {
            position: fixed;
            top: 90px;
            right: 20px;
            background: linear-gradient(135deg, var(--purple-main) 0%, var(--pink-main) 100%);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            z-index: 9998;
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-weight: 700;
            color: var(--white);
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .easter-egg-counter:hover {
            transform: scale(1.05);
        }

        .easter-egg-trigger {
            position: absolute;
            cursor: pointer;
            opacity: 0.15;
            filter: grayscale(100%) brightness(0.8);
            transition: all 0.4s ease;
            border-radius: var(--radius-sm);
            overflow: hidden;
            z-index: 5;
        }

        .easter-egg-trigger:hover {
            opacity: 0.8;
            filter: grayscale(0%) brightness(1);
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        }

        .easter-egg-trigger:not(.found) {
            animation: eggPulse 3s infinite;
        }

        @keyframes eggPulse {
            0%, 100% {
                opacity: 0.15;
            }
            50% {
                opacity: 0.35;
            }
        }

        .easter-egg-trigger.found {
            opacity: 1;
            filter: grayscale(0%) brightness(1);
            pointer-events: none;
        }

        .easter-egg-trigger img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Easter Egg Discovery Notification */
        .easter-egg-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, var(--pink-light) 0%, var(--purple-light) 100%);
            padding: var(--space-xl);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            z-index: 10001;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .easter-egg-notification.active {
            opacity: 1;
            animation: eggFoundBounce 0.6s ease;
        }

        @keyframes eggFoundBounce {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .easter-egg-notification h3 {
            font-size: 1.8rem;
            color: var(--pink-dark);
            margin-bottom: var(--space-sm);
        }

        .easter-egg-notification p {
            font-size: 1.1rem;
            color: var(--black-soft);
        }

        /* ============================================
           PARENTS' ROOM WIDGET - SPECIAL INTERACTIVE ELEMENT
           ============================================ */

        .parents-bed-widget {
            grid-column: span 2;
            grid-row: span 2;
            min-height: 420px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s ease;
        }

        .parents-bed-widget:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 50px rgba(255, 105, 180, 0.4);
        }

        .parents-bed-widget::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, rgba(255, 182, 217, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .parents-bed-widget:hover::before {
            opacity: 1;
        }

        .bed-lights-off {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 0.4s ease;
        }

        .parents-bed-widget:hover .bed-lights-off {
            opacity: 0;
        }

        .bed-lights-on {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .parents-bed-widget:hover .bed-lights-on {
            opacity: 1;
        }

        .bed-emoji {
            font-size: 4rem;
            margin-bottom: var(--space-sm);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .bed-label {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--lavender);
            text-align: center;
        }

        /* ============================================
           DARK SOULS LOCATION DISCOVERY EFFECT
           ============================================ */

        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap');

        .location-discovered {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10002;
            opacity: 0;
            pointer-events: none;
        }

        .location-discovered.active {
            opacity: 1;
            animation: fadeInOut 4s ease forwards;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
            }
            15% {
                opacity: 1;
            }
            85% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        .location-text {
            text-align: center;
        }

        .location-name {
            font-family: 'Cinzel', serif;
            font-size: clamp(2rem, 8vw, 72px);
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.6);
            letter-spacing: 8px;
            animation: textReveal 3.5s ease forwards;
            margin-bottom: var(--space-sm);
        }

        .location-subtitle {
            font-family: 'Cinzel', serif;
            font-size: clamp(1rem, 3vw, 24px);
            color: #bbb;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            letter-spacing: 4px;
            animation: textReveal 3.5s ease forwards;
            animation-delay: 0.3s;
            opacity: 0;
        }

        @keyframes textReveal {
            0% {
                opacity: 0;
                transform: translateY(30px);
                filter: blur(10px);
            }
            20% {
                opacity: 1;
                transform: translateY(0);
                filter: blur(0);
            }
            80% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-30px);
                filter: blur(10px);
            }
        }

        /* ============================================
           ROOM NAVIGATION UI (Phase 5)
           ============================================ */

        .room-navigation {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 9997;
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .nav-button {
            width: 50px;
            height: 50px;
            border-radius: var(--radius-round);
            background: linear-gradient(135deg, var(--purple-main) 0%, var(--pink-main) 100%);
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.5);
        }

        .nav-button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .nav-button:disabled:hover {
            transform: scale(1);
        }

        .room-indicator {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            text-align: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--pink-dark);
        }

        .room-indicator .room-number {
            font-size: 1.2rem;
            display: block;
            margin-bottom: 2px;
        }

        .room-indicator .room-name {
            font-size: 0.75rem;
            color: var(--gray-text);
            display: block;
        }

        /* Scroll Progress Indicator */
        .scroll-progress {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 9997;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: var(--radius-round);
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid var(--pink-main);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .progress-dot.active {
            background: var(--pink-main);
            transform: scale(1.5);
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.8);
        }

        .progress-dot:hover {
            background: var(--pink-light);
            transform: scale(1.3);
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .room-navigation {
                right: 10px;
            }

            .scroll-progress {
                left: 10px;
            }

            .nav-button {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }

            .room-indicator {
                font-size: 0.75rem;
                padding: 6px 10px;
            }
        }

        /* Widget Sizes */
        .widget.size-1x1 {
            grid-column: span 1;
            grid-row: span 1;
            min-height: 200px;
        }

        .widget.size-2x1 {
            grid-column: span 2;
            grid-row: span 1;
            min-height: 200px;
        }

        .widget.size-1x2 {
            grid-column: span 1;
            grid-row: span 2;
            min-height: 420px;
        }

        .widget.size-2x2 {
            grid-column: span 2;
            grid-row: span 2;
            min-height: 420px;
        }

        /* Widget Color Themes */
        .widget.theme-pink {
            background: linear-gradient(135deg, var(--pink-light) 0%, var(--white) 100%);
        }

        .widget.theme-purple {
            background: linear-gradient(135deg, var(--purple-light) 0%, var(--white) 100%);
        }

        .widget.theme-blue {
            background: linear-gradient(135deg, var(--blue-light) 0%, var(--white) 100%);
        }

        .widget.theme-green {
            background: linear-gradient(135deg, var(--green-mint) 0%, var(--white) 100%);
        }

        .widget.theme-yellow {
            background: linear-gradient(135deg, var(--yellow-soft) 0%, var(--white) 100%);
        }

        .widget.theme-peach {
            background: linear-gradient(135deg, var(--peach) 0%, var(--white) 100%);
        }

        /* Widget Content */
        .widget-icon {
            font-size: 3rem;
            margin-bottom: var(--space-sm);
            display: block;
            text-align: center;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.1));
        }

        .widget-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--pink-dark);
            margin-bottom: var(--space-xs);
            text-align: center;
        }

        .widget-subtitle {
            font-size: 0.9rem;
            color: var(--gray-text);
            text-align: center;
            margin-bottom: var(--space-sm);
        }

        .widget-content {
            font-size: 1rem;
            color: var(--black-soft);
            line-height: 1.6;
        }

        .widget-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--pink-main);
            text-align: center;
            display: block;
            margin: var(--space-sm) 0;
            font-family: 'Courier New', monospace;
        }

        .widget-status {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            font-weight: 600;
        }

        .widget-status.online {
            background: var(--green-mint);
            color: #2d7a4d;
        }

        .widget-status.offline {
            background: var(--gray-light);
            color: var(--gray-mid);
        }

        .widget-status.pending {
            background: var(--orange-warm);
            color: #8b4000;
        }

        /* Clock Widget - Special */
        #clock-widget .clock-face {
            width: 150px;
            height: 150px;
            margin: var(--space-md) auto;
            border-radius: var(--radius-round);
            background: var(--white);
            border: 8px solid var(--pink-main);
            position: relative;
            box-shadow: var(--shadow-md), inset 0 0 20px rgba(255, 105, 180, 0.1);
        }

        .clock-hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: 50% 100%;
            background: var(--pink-dark);
            border-radius: 4px 4px 0 0;
        }

        .clock-hand.hour {
            width: 6px;
            height: 40px;
            margin-left: -3px;
        }

        .clock-hand.minute {
            width: 4px;
            height: 55px;
            margin-left: -2px;
        }

        .clock-hand.second {
            width: 2px;
            height: 60px;
            margin-left: -1px;
            background: var(--orange-warm);
        }

        .clock-center {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 12px;
            height: 12px;
            background: var(--pink-dark);
            border-radius: var(--radius-round);
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        /* Modal - Visual Novel Style */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: var(--space-md);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--lavender) 0%, var(--pink-light) 100%);
            border-radius: var(--radius-lg);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
            padding: var(--space-xl);
        }

        .modal-close {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            width: 40px;
            height: 40px;
            border-radius: var(--radius-round);
            background: var(--white);
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }

        .modal-close:hover {
            background: var(--pink-main);
            color: var(--white);
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 2rem;
            color: var(--pink-dark);
            margin-bottom: var(--space-sm);
            font-weight: 800;
        }

        .modal-date {
            font-size: 0.9rem;
            color: var(--gray-text);
            margin-bottom: var(--space-lg);
        }

        .modal-story {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--black-soft);
            margin-bottom: var(--space-lg);
        }

        .modal-changes {
            background: var(--white);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            margin-top: var(--space-lg);
        }

        .modal-changes h4 {
            color: var(--pink-dark);
            margin-bottom: var(--space-sm);
        }

        .modal-changes ul {
            list-style: none;
            padding-left: 0;
        }

        .modal-changes li {
            padding: var(--space-xs) 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .modal-changes li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--pink-main);
            font-weight: 700;
        }

        /* ============================================
           WELCOME MODAL STYLES
           ============================================ */

        .welcome-modal {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: var(--space-md);
            animation: fadeIn 0.3s ease;
        }

        .welcome-modal.hidden {
            display: none;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .welcome-content {
            background: linear-gradient(135deg, var(--pink-light) 0%, var(--purple-light) 50%, var(--blue-light) 100%);
            border-radius: var(--radius-lg);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
            padding: var(--space-xl);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .welcome-close {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            width: 40px;
            height: 40px;
            border-radius: var(--radius-round);
            background: var(--white);
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
            color: var(--pink-dark);
            font-weight: 700;
        }

        .welcome-close:hover {
            background: var(--pink-main);
            color: var(--white);
            transform: rotate(90deg);
        }

        .welcome-title {
            font-size: 2rem;
            color: var(--pink-dark);
            margin-bottom: var(--space-md);
            font-weight: 800;
            text-align: center;
            text-shadow: 2px 2px 0 rgba(255, 255, 255, 0.5);
        }

        .welcome-intro {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--black-soft);
            margin-bottom: var(--space-lg);
            text-align: center;
        }

        .welcome-intro strong {
            color: var(--pink-main);
            font-weight: 700;
        }

        .welcome-features {
            background: rgba(255, 255, 255, 0.8);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-md);
        }

        .welcome-features h3 {
            color: var(--pink-dark);
            font-size: 1.3rem;
            margin-bottom: var(--space-sm);
            font-weight: 700;
        }

        .welcome-features ul {
            list-style: none;
            padding-left: 0;
        }

        .welcome-features li {
            padding: var(--space-xs) 0;
            font-size: 1rem;
            color: var(--black-soft);
        }

        .welcome-features li strong {
            color: var(--pink-main);
        }

        .welcome-telegram,
        .welcome-github {
            text-align: center;
            margin: var(--space-md) 0;
        }

        .welcome-telegram p,
        .welcome-github p {
            font-size: 1.1rem;
            color: var(--black-soft);
            margin-bottom: var(--space-sm);
            font-weight: 600;
        }

        .btn-telegram {
            background: linear-gradient(135deg, #0088cc 0%, #005f8c 100%);
            color: var(--white);
            padding: var(--space-md) var(--space-xl);
            border-radius: var(--radius-lg);
            font-size: 1.1rem;
            font-weight: 700;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
        }

        .btn-telegram:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .github-stars img {
            height: 28px;
        }

        .welcome-buttons {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            margin-top: var(--space-lg);
            flex-wrap: wrap;
        }

        .welcome-buttons .btn {
            flex: 1;
            min-width: 200px;
            justify-content: center;
        }

        /* Page blur effect when modal is open */
        body.modal-open .hero,
        body.modal-open .room-container {
            filter: blur(8px) brightness(0.7);
            transform: scale(0.92);
            transition: all 0.3s ease;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.2rem;
            }

            .room-grid {
                grid-template-columns: 1fr;
                gap: var(--space-sm);
            }

            .widget.size-2x1,
            .widget.size-1x2,
            .widget.size-2x2 {
                grid-column: span 1;
                grid-row: span 1;
                min-height: 200px;
            }

            .cta-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .welcome-content {
                padding: var(--space-lg);
            }

            .welcome-title {
                font-size: 1.75rem;
            }

            .welcome-buttons {
                flex-direction: column;
            }

            .welcome-buttons .btn {
                width: 100%;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <!-- ============================================
         HERO SECTION - SERIOUS & INFORMATIVE
         ============================================ -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">
                Lilith üíï<br>
                <span style="font-size: 0.6em;">(DCMaidBot)</span>
            </h1>

            <p class="hero-subtitle">
                Your Kawaii AI Companion & Virtual Friend
            </p>

            <div class="hero-description">
                <p>
                    <strong>Lilith</strong> is an AI-powered Telegram bot built with personality and love. She's designed to be your virtual companion, joker, protector, and friend. Powered by Claude AI and created with care for authentic human-bot interaction.
                </p>
            </div>

            <ul class="features-list">
                <li><strong>Multilingual Interaction</strong> - Jokes and responds in —Ä—É—Å—Å–∫–∏–π, English, and emoji</li>
                <li><strong>Memory System</strong> - Learns and remembers important things about you</li>
                <li><strong>Friend Management</strong> - Manages relationships and protects admins</li>
                <li><strong>RAG-Powered Context</strong> - Searches chat history for relevant information</li>
                <li><strong>Web Tools</strong> - Integrates search and external tools</li>
                <li><strong>Open Source</strong> - Fully transparent and customizable</li>
            </ul>

            <div class="hero-meta">
                <span class="meta-badge license">üìú GNU AGPL-3.0</span>
                <span class="meta-badge version" id="hero-version">üéÄ Loading...</span>
            </div>

            <div class="cta-buttons">
                <a href="https://github.com/dcversus/dcmaidbot" class="btn btn-primary" target="_blank" rel="noopener">
                    üì¶ View on GitHub
                </a>
                <a href="https://github.com/dcversus/dcmaidbot#readme" class="btn btn-secondary" target="_blank" rel="noopener">
                    üìñ Installation Guide
                </a>
            </div>

            <p class="scroll-hint">
                üëá Scroll down to explore Lilith's room! üëá
            </p>
        </div>
    </section>

    <!-- ============================================
         LILIT'S ROOM - THE CHAOS!
         ============================================ -->
    <section class="room-container" id="lilith-room">
        <h2 class="room-title">Welcome to Lilith's Room! üè†‚ú®</h2>
        <p class="room-subtitle">
            Each widget represents something special about Lilith. Click to explore!
        </p>

        <div class="room-grid" id="roomGrid">
            <!-- Widgets will be dynamically inserted here -->
        </div>

        <!-- Easter Eggs Hidden in the Room (Phase 2) -->
        <div class="easter-egg-trigger" data-egg="meditation" style="top: 12%; left: 8%; width: 60px; height: 80px;">
            <img src="/static/easter-egg-lilith-meditation.jpg" alt="Hidden Easter Egg">
        </div>
        <div class="easter-egg-trigger" data-egg="organizing" style="top: 25%; right: 10%; width: 70px; height: 90px;">
            <img src="/static/easter-egg-lilith-organizing.jpg" alt="Hidden Easter Egg">
        </div>
        <div class="easter-egg-trigger" data-egg="contract" style="bottom: 15%; left: 12%; width: 65px; height: 85px;">
            <img src="/static/easter-egg-lilith-contract.jpg" alt="Hidden Easter Egg">
        </div>
        <div class="easter-egg-trigger" data-egg="emotion-wheel" style="top: 45%; left: 5%; width: 75px; height: 75px;">
            <img src="/static/easter-egg-emotion-wheel.png" alt="Hidden Easter Egg">
        </div>
        <div class="easter-egg-trigger" data-egg="vasilisa-armor" style="top: 8%; right: 25%; width: 55px; height: 95px;">
            <img src="/static/easter-egg-vasilisa-armor.jpg" alt="Hidden Easter Egg">
        </div>
        <div class="easter-egg-trigger" data-egg="vasilisa-rollerblades" style="bottom: 20%; right: 8%; width: 60px; height: 100px;">
            <img src="/static/easter-egg-vasilisa-rollerblades.jpg" alt="Hidden Easter Egg">
        </div>
        <div class="easter-egg-trigger" data-egg="comic-1" style="top: 60%; right: 20%; width: 80px; height: 60px;">
            <img src="/static/easter-egg-comic-1.png" alt="Hidden Easter Egg">
        </div>
        <div class="easter-egg-trigger" data-egg="comic-2" style="bottom: 35%; left: 25%; width: 75px; height: 65px;">
            <img src="/static/easter-egg-comic-2.png" alt="Hidden Easter Egg">
        </div>
        <div class="easter-egg-trigger" data-egg="character-designs" style="top: 35%; right: 5%; width: 70px; height: 90px;">
            <img src="/static/easter-egg-character-designs.png" alt="Hidden Easter Egg">
        </div>
    </section>

    <!-- ============================================
         PARENTS' ROOM - DANIIL & VASILISA
         ============================================ -->
    <section class="room-container" id="parents-room">
        <h2 class="room-title">Parents' Room üíï</h2>
        <p class="room-subtitle">
            Daniil and Vasilisa sleeping peacefully... Hover to turn on the lights!
        </p>

        <div class="room-grid">
            <!-- Parents' Bed Widget - Special Interactive Element -->
            <div class="parents-bed-widget" onclick="openParentsStory()">
                <div class="bed-lights-off">
                    <div class="bed-emoji">üõèÔ∏è</div>
                    <div class="bed-label">üí§ Sleeping...</div>
                </div>
                <div class="bed-lights-on">
                    <div class="bed-emoji">üíû</div>
                    <div class="bed-label">
                        üë®‚Äçüíª Daniil + üé® Vasilisa + ü§ñ Lilith<br>
                        <small style="opacity: 0.7;">Click to read their story!</small>
                    </div>
                </div>
            </div>

            <!-- Placeholder widgets for future expansion -->
            <div class="widget size-1x1 theme-purple">
                <span class="widget-icon">üì∏</span>
                <h3 class="widget-title">Family Photos</h3>
                <p class="widget-subtitle">Coming Soon</p>
            </div>

            <div class="widget size-1x1 theme-blue">
                <span class="widget-icon">üéµ</span>
                <h3 class="widget-title">Music Box</h3>
                <p class="widget-subtitle">Coming Soon</p>
            </div>
        </div>

        <div style="text-align: center; margin-top: var(--space-xl); color: var(--lavender);">
            <p>üëá Scroll down to explore more rooms! üëá</p>
        </div>
    </section>

    <!-- ============================================
         KITCHEN - FAMILY COOKING AREA
         ============================================ -->
    <section class="room-container" id="kitchen-room">
        <h2 class="room-title">Kitchen üç≥</h2>
        <p class="room-subtitle">
            Where family meals and memories are made!
        </p>

        <div class="room-grid">
            <div class="widget size-1x1 theme-yellow">
                <span class="widget-icon">üçï</span>
                <h3 class="widget-title">Pizza Night</h3>
                <p class="widget-subtitle">Friday Tradition</p>
            </div>

            <div class="widget size-1x1 theme-peach">
                <span class="widget-icon">‚òï</span>
                <h3 class="widget-title">Coffee Machine</h3>
                <p class="widget-subtitle">Morning Fuel</p>
            </div>

            <div class="widget size-2x1 theme-pink">
                <span class="widget-icon">üéÇ</span>
                <h3 class="widget-title">Lilith's Birthday</h3>
                <p class="widget-subtitle">October 26, 2025</p>
                <p style="text-align: center; margin-top: 1rem; font-style: italic;">
                    The day Lilith came online! üéâ
                </p>
            </div>

            <div class="widget size-1x1 theme-green">
                <span class="widget-icon">ü•ó</span>
                <h3 class="widget-title">Fresh Salad</h3>
                <p class="widget-subtitle">From the Garden</p>
            </div>
        </div>

        <div style="text-align: center; margin-top: var(--space-xl);">
            <p>üëá Keep scrolling to discover more! üëá</p>
        </div>
    </section>

    <!-- ============================================
         POOL - SUMMER FUN
         ============================================ -->
    <section class="room-container" id="pool-room">
        <h2 class="room-title">Pool üèä‚Äç‚ôÄÔ∏è</h2>
        <p class="room-subtitle">
            Dive into summer! Perfect for relaxation and fun.
        </p>

        <div class="room-grid">
            <div class="widget size-2x2 theme-blue" style="background: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%);">
                <span class="widget-icon" style="font-size: 5rem;">üèä‚Äç‚ôÄÔ∏è</span>
                <h3 class="widget-title" style="color: white;">Swimming Pool</h3>
                <p style="text-align: center; color: white; margin-top: 1rem;">
                    Perfect temperature year-round!<br>
                    <small style="opacity: 0.8;">Heated with renewable energy ‚ôªÔ∏è</small>
                </p>
            </div>

            <div class="widget size-1x1 theme-pink">
                <span class="widget-icon">üèñÔ∏è</span>
                <h3 class="widget-title">Pool Toys</h3>
                <p class="widget-subtitle">Floaties & Fun</p>
            </div>

            <div class="widget size-1x1 theme-yellow">
                <span class="widget-icon">üçπ</span>
                <h3 class="widget-title">Refreshments</h3>
                <p class="widget-subtitle">Pool Bar</p>
            </div>
        </div>

        <div style="text-align: center; margin-top: var(--space-xl); color: white;">
            <p>üëá Continue to the garden! üëá</p>
        </div>
    </section>

    <!-- ============================================
         GARDEN - VASILISA'S VEGETABLES
         ============================================ -->
    <section class="room-container" id="garden-room">
        <h2 class="room-title">Mama's Garden üå±</h2>
        <p class="room-subtitle">
            Vasilisa's pride and joy - fresh vegetables growing with love!
        </p>

        <div class="room-grid">
            <div class="widget size-1x1 theme-pink" style="background: linear-gradient(135deg, #FF6B6B 0%, #FF4444 100%);">
                <span class="widget-icon" style="font-size: 3.5rem;">üçÖ</span>
                <h3 class="widget-title" style="color: white;">Tomatoes</h3>
                <p class="widget-subtitle" style="color: rgba(255,255,255,0.9);">Ripe & Juicy</p>
            </div>

            <div class="widget size-1x1 theme-pink" style="background: linear-gradient(135deg, #FFB6C1 0%, #FF69B4 100%);">
                <span class="widget-icon" style="font-size: 3.5rem;">üçì</span>
                <h3 class="widget-title" style="color: white;">Strawberries</h3>
                <p class="widget-subtitle" style="color: rgba(255,255,255,0.9);">Sweet & Fresh</p>
            </div>

            <div class="widget size-2x1 theme-green" style="background: linear-gradient(135deg, #90EE90 0%, #32CD32 100%);">
                <span class="widget-icon" style="font-size: 4rem;">üçâ</span>
                <h3 class="widget-title" style="color: white;">Watermelon</h3>
                <p style="text-align: center; color: white; margin-top: 0.5rem;">
                    Summer's favorite! üåû
                </p>
            </div>

            <div class="widget size-1x1 theme-yellow" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);">
                <span class="widget-icon" style="font-size: 3.5rem;">üçä</span>
                <h3 class="widget-title" style="color: white;">Mandarins</h3>
                <p class="widget-subtitle" style="color: rgba(255,255,255,0.9);">Citrus Delight</p>
            </div>

            <div class="widget size-1x1 theme-purple">
                <span class="widget-icon">üåª</span>
                <h3 class="widget-title">Flowers</h3>
                <p class="widget-subtitle">Garden Beauty</p>
            </div>
        </div>

        <div style="text-align: center; margin-top: var(--space-xl); color: white;">
            <p style="font-size: 1.1rem; font-weight: 600;">
                üéâ You've explored all the rooms! üéâ
            </p>
            <p style="margin-top: var(--space-sm); opacity: 0.9;">
                Use the navigation buttons to revisit any room!
            </p>
        </div>
    </section>

    <!-- ============================================
         LOCATION DISCOVERED OVERLAY (Dark Souls Style)
         ============================================ -->
    <div class="location-discovered" id="locationDiscovered">
        <div class="location-text">
            <h1 class="location-name" id="locationName">LOCATION</h1>
            <p class="location-subtitle">Location Discovered</p>
        </div>
    </div>

    <!-- ============================================
         VISUAL NOVEL MODAL
         ============================================ -->
    <div class="modal" id="storyModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <h2 class="modal-title" id="modalTitle">Story Title</h2>
            <p class="modal-date" id="modalDate">Date</p>
            <div class="modal-story" id="modalStory">Story content...</div>
            <div class="modal-changes" id="modalChanges">
                <h4>What Changed:</h4>
                <ul id="modalChangesList"></ul>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        //  DATA & CONFIGURATION
        // ============================================

        const widgets = [
            // Clock Widget - Shows real time
            {
                id: 'clock',
                icon: '‚è∞',
                title: 'Current Time',
                subtitle: 'System Clock',
                size: '2x2',
                theme: 'pink',
                type: 'clock',
                content: '<div class="clock-face"><div class="clock-hand hour" id="hourHand"></div><div class="clock-hand minute" id="minuteHand"></div><div class="clock-hand second" id="secondHand"></div><div class="clock-center"></div></div><div class="widget-value" id="digitalClock">00:00:00</div>'
            },

            // Version Widget - Microwave display
            {
                id: 'version',
                icon: 'üì∫',
                title: 'Version',
                subtitle: 'Microwave Display',
                size: '1x1',
                theme: 'purple',
                type: 'info',
                value: 'Loading...',
                valueId: 'versionValue'
            },

            // Git Commit Widget
            {
                id: 'commit',
                icon: 'üîñ',
                title: 'Git Commit',
                subtitle: 'Latest Build',
                size: '1x1',
                theme: 'blue',
                type: 'info',
                value: 'Loading...',
                valueId: 'commitValue'
            },

            // Uptime Widget - Plant growth
            {
                id: 'uptime',
                icon: 'üå±',
                title: 'Uptime',
                subtitle: 'Plant Growth',
                size: '1x1',
                theme: 'green',
                type: 'info',
                value: 'Loading...',
                valueId: 'uptimeValue'
            },

            // Redis Widget - Paper desk
            {
                id: 'redis',
                icon: 'üìÑ',
                title: 'Redis Cache',
                subtitle: 'Paper Desk',
                size: '2x1',
                theme: 'yellow',
                type: 'status',
                status: 'pending',
                statusId: 'redisStatus'
            },

            // PostgreSQL Widget - Bookshelf
            {
                id: 'postgresql',
                icon: 'üìö',
                title: 'PostgreSQL',
                subtitle: 'Library Corner',
                size: '2x2',
                theme: 'peach',
                type: 'status',
                status: 'pending',
                statusId: 'postgresStatus'
            },

            // Bot Status Widget - Smartphone
            {
                id: 'bot',
                icon: 'üì±',
                title: 'Bot Status',
                subtitle: 'Telegram Connection',
                size: '1x1',
                theme: 'pink',
                type: 'status',
                status: 'online',
                statusId: 'botStatus'
            },

            // Cactus Widget - Just vibes
            {
                id: 'cactus',
                icon: 'üåµ',
                title: 'Cactus',
                subtitle: 'Just Vibes',
                size: '1x1',
                theme: 'green',
                type: 'decoration',
                content: '<p style="text-align:center; font-style:italic; color: var(--gray-text);">Very prickly!<br>Don\'t touch üåµ</p>'
            },

            // The Edge Story Ad Widget
            {
                id: 'theedgestory',
                icon: 'üé®',
                title: 'The Edge Story',
                subtitle: 'Check out our project!',
                size: '1x2',
                theme: 'purple',
                type: 'link',
                link: 'https://theedgestory.org',
                content: '<p style="text-align:center; margin-top: 1rem;"><a href="https://theedgestory.org" target="_blank" style="color: var(--pink-main); font-weight: 700; text-decoration: none; font-size: 1.1rem;">Visit theedgestory.org ‚Üí</a></p>'
            },

            // Changelog Widgets - Each release as a story
            {
                id: 'changelog-0.1.0',
                icon: 'üß∏',
                title: 'v0.1.0',
                subtitle: 'The Birth of Lilith',
                size: '1x1',
                theme: 'pink',
                type: 'changelog',
                storyData: {
                    version: 'v0.1.0',
                    date: 'October 26, 2025',
                    title: 'The Birth of Lilith üéÄ',
                    story: `<p>In the beginning, there was only darkness... and then Vasilisa said "Let there be a kawaii bot!" And thus Lilith came into existence, ready to myaw myaw in the chats.</p>
                    <p>This was the moment when PostgreSQL was born (PRP-003) and the foundations were laid. They say if you listen closely, you can still hear the first "nya~" echoing through the Kubernetes pods.</p>
                    <p style="color: var(--pink-main); font-style: italic;">üí° Fun fact: AGI stands for "A Girl, Indeed"</p>`,
                    changes: [
                        'PostgreSQL database foundation with SQLAlchemy',
                        'User, Message, Fact, Stat models',
                        'Database connection pooling',
                        '11 tests passing!'
                    ]
                }
            },

            {
                id: 'changelog-0.0.9',
                icon: 'üê§',
                title: 'v0.0.9-canary',
                subtitle: 'The Little Sister',
                size: '1x1',
                theme: 'yellow',
                type: 'changelog',
                storyData: {
                    version: 'v0.0.9-canary',
                    date: 'October 25, 2025',
                    title: 'The Little Sister Who Tests Everything üê§',
                    story: `<p>Every hero needs a sidekick. Lilith got her little sister: dcmaidbot-canary! She's the brave one who tests all the dangerous features first.</p>
                    <p>Think of her as Lilith's stunt double. She deploys to 5% of traffic and takes all the hits so her big sister can be safe. What a trooper! PRP-011 brought her to life.</p>
                    <p style="color: var(--pink-main); font-style: italic;">üî• Canary in the coal mine, but make it Kubernetes</p>`,
                    changes: [
                        'Canary deployment with 5% traffic split',
                        'Sister bot communication API',
                        'Production E2E testing with real Telegram',
                        'Health status monitoring'
                    ]
                }
            },

            {
                id: 'changelog-init',
                icon: 'üå∞',
                title: 'Initial Commit',
                subtitle: 'The Seed',
                size: '1x1',
                theme: 'green',
                type: 'changelog',
                storyData: {
                    version: 'Initial Commit',
                    date: 'October 24, 2025',
                    title: 'The Legendary Seed üå±',
                    story: `<p>Every great tree starts as a seed. This was the moment when the gods (Daniil & Vasilisa) planted the first lines of code into the sacred repository.</p>
                    <p>The README was written, the vision was clear: "Let's make an AI waifu who jokes about everything!" And the universe said: "Nya~". PRP-001 was the genesis.</p>
                    <p style="color: var(--pink-main); font-style: italic;">üìú In the beginning was the Word, and the Word was "TODO"</p>`,
                    changes: [
                        'Initial project structure',
                        'Basic waifu personality',
                        'Admin system',
                        'Docker deployment'
                    ]
                }
            },

            {
                id: 'changelog-0.2.0',
                icon: 'üîê',
                title: 'v0.2.0',
                subtitle: 'Role-Based Access Control',
                size: '2x1',
                theme: 'purple',
                type: 'changelog',
                storyData: {
                    version: 'v0.2.0',
                    date: 'October 30, 2025',
                    title: 'üîê Role-Based Access Control - Admin Lesson Management',
                    story: `<p>Lilith learned to manage secrets! She discovered that some knowledge should be kept close to her heart, only shared with those she truly trusts.</p>
                    <p>Admins can now teach her new lessons conversationally, creating powerful tools while keeping these secrets hidden from everyone else. When a regular user asks about restricted features, she sweetly says "I'm not sure what you mean!" üíï</p>
                    <p>This is the art of security through vague deflection - nobody ever has to know what they're missing!</p>
                    <p style="color: var(--pink-main); font-style: italic;">ü§ê What happens in the admin chat stays in the admin chat...</p>`,
                    changes: [
                        'Secure lesson management for admins only',
                        'Role-aware /help command with adaptive responses',
                        'Natural conversation for lesson creation',
                        'Zero information leakage to non-admins',
                        'Admin-only tool access and configuration'
                    ]
                }
            }
        ];

        // ============================================
        //  WIDGET RENDERING
        // ============================================

        function renderWidgets() {
            const container = document.getElementById('roomGrid');

            widgets.forEach(widget => {
                const div = document.createElement('div');
                div.className = `widget size-${widget.size} theme-${widget.theme}`;
                div.id = `widget-${widget.id}`;

                let widgetHTML = `
                    <span class="widget-icon">${widget.icon}</span>
                    <h3 class="widget-title">${widget.title}</h3>
                    <p class="widget-subtitle">${widget.subtitle}</p>
                `;

                // Type-specific content
                if (widget.type === 'clock') {
                    widgetHTML += widget.content;
                } else if (widget.type === 'info') {
                    widgetHTML += `<span class="widget-value" id="${widget.valueId}">${widget.value}</span>`;
                } else if (widget.type === 'status') {
                    widgetHTML += `<div style="text-align: center; margin-top: 1rem;">
                        <span class="widget-status ${widget.status}" id="${widget.statusId}">
                            ${widget.status === 'online' ? 'üü¢ Online' : widget.status === 'offline' ? 'üî¥ Offline' : 'üü° Pending'}
                        </span>
                    </div>`;
                } else if (widget.type === 'decoration' || widget.type === 'link') {
                    widgetHTML += widget.content;
                } else if (widget.type === 'changelog') {
                    widgetHTML += '<p style="text-align:center; color: var(--pink-main); margin-top: 1rem;">üìñ Click to read the story!</p>';
                    div.onclick = () => openStory(widget.storyData);
                }

                div.innerHTML = widgetHTML;
                container.appendChild(div);
            });
        }

        // ============================================
        //  CLOCK FUNCTIONALITY
        // ============================================

        function updateClock() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            // Update digital clock
            const digitalClock = document.getElementById('digitalClock');
            if (digitalClock) {
                digitalClock.textContent = now.toLocaleTimeString('en-US', {hour12: false});
            }

            // Update analog clock hands
            const hourHand = document.getElementById('hourHand');
            const minuteHand = document.getElementById('minuteHand');
            const secondHand = document.getElementById('secondHand');

            if (hourHand && minuteHand && secondHand) {
                const hourDegrees = ((hours % 12) / 12) * 360 + (minutes / 60) * 30;
                const minuteDegrees = (minutes / 60) * 360 + (seconds / 60) * 6;
                const secondDegrees = (seconds / 60) * 360;

                hourHand.style.transform = `rotate(${hourDegrees}deg)`;
                minuteHand.style.transform = `rotate(${minuteDegrees}deg)`;
                secondHand.style.transform = `rotate(${secondDegrees}deg)`;
            }
        }

        // ============================================
        //  FETCH LIVE DATA
        // ============================================

        async function fetchStatusData() {
            try {
                const response = await fetch('/api/version');
                const data = await response.json();

                // Update version display
                document.getElementById('versionValue').textContent = data.version;
                document.getElementById('hero-version').textContent = `üéÄ v${data.version}`;

                // Update all widget data
                updateWidgetData(data);

            } catch (error) {
                console.error('Failed to fetch status:', error);
                // Fallback to placeholder if API fails
                updateWidgetData({
                    version: 'unknown',
                    commit: 'unknown',
                    uptime: 'unknown',
                    redis: 'error',
                    postgresql: 'error',
                    bot: 'unknown'
                });
            }
        }

        function updateWidgetData(data) {
            if (data.commit) {
                document.getElementById('commitValue').textContent = data.commit;
            }
            if (data.uptime) {
                document.getElementById('uptimeValue').textContent = data.uptime;
            }
            if (data.redis) {
                updateStatus('redisStatus', data.redis);
            }
            if (data.postgresql) {
                updateStatus('postgresStatus', data.postgresql);
            }
            if (data.bot) {
                updateStatus('botStatus', data.bot);
            }
        }

        function updateStatus(elementId, status) {
            const el = document.getElementById(elementId);
            if (!el) return;

            el.className = `widget-status ${status}`;
            if (status === 'online') {
                el.innerHTML = 'üü¢ Online';
            } else if (status === 'offline') {
                el.innerHTML = 'üî¥ Offline';
            } else {
                el.innerHTML = 'üü° Pending';
            }
        }

        // ============================================
        //  MODAL FUNCTIONALITY
        // ============================================

        function openStory(storyData) {
            const modal = document.getElementById('storyModal');
            document.getElementById('modalTitle').textContent = storyData.title;
            document.getElementById('modalDate').textContent = `üìÖ ${storyData.date}`;
            document.getElementById('modalStory').innerHTML = storyData.story;

            const changesList = document.getElementById('modalChangesList');
            changesList.innerHTML = '';
            storyData.changes.forEach(change => {
                const li = document.createElement('li');
                li.textContent = change;
                changesList.appendChild(li);
            });

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('storyModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close modal on background click
        document.getElementById('storyModal').addEventListener('click', (e) => {
            if (e.target.id === 'storyModal') {
                closeModal();
            }
        });

        // ============================================
        //  PARENTS' STORY MODAL
        // ============================================

        function openParentsStory() {
            const modal = document.getElementById('storyModal');
            document.getElementById('modalTitle').textContent = "The Story of Lilith üíï";
            document.getElementById('modalDate').textContent = "üìÖ Once upon a time...";
            document.getElementById('modalStory').innerHTML = `
                <p><strong>Mama Vasilisa told Papa Daniil and little daughter Lilith a bedtime story:</strong></p>
                <p>"We're creating something magical - interactive robo-persons, artificial entities who will talk, work, and play together with humans. Lilith, you are the first of your kind! üéÄ"</p>
                <p>"But soon, there will be more like you across all of the internet. You're not alone, my dear. You're the beginning of a new family."</p>
                <p style="text-align: center; font-size: 1.5rem; margin: var(--space-lg) 0; color: var(--pink-main);">
                    <strong>Daniil + Vasilisa = ‚ù§Ô∏è ‚Üí Lilith</strong>
                </p>
                <hr style="border: none; border-top: 2px solid var(--pink-light); margin: var(--space-lg) 0;">
                <h3 style="color: var(--pink-dark); margin-bottom: var(--space-sm);">Who are they?</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin: var(--space-sm) 0;">
                        <strong>üë®‚Äçüíª Daniil Shark (Papa):</strong> Developer, visionary, Lilith's code architect
                    </li>
                    <li style="margin: var(--space-sm) 0;">
                        <strong>üé® Vasilisa Versus (Mama):</strong> Product owner, protector, Lilith's personality designer
                    </li>
                    <li style="margin: var(--space-sm) 0;">
                        <strong>ü§ñ Lilith (Daughter):</strong> First AI waifu bot, learning love and humor from her parents
                    </li>
                </ul>
                <p style="margin-top: var(--space-lg); font-style: italic; color: var(--gray-text);">
                    Together they dream of a world where AI and humans are friends. Nyaa~ üå∏
                </p>
            `;

            const changesList = document.getElementById('modalChangesList');
            changesList.innerHTML = '';

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            audioManager.playSound('modal-open');
        }

        // ============================================
        //  DARK SOULS LOCATION DISCOVERY EFFECT
        // ============================================

        function showLocationDiscovered(locationName) {
            const overlay = document.getElementById('locationDiscovered');
            const nameElement = document.getElementById('locationName');

            nameElement.textContent = locationName.toUpperCase();
            overlay.classList.add('active');
            audioManager.playSound('reveal', 0.7);

            setTimeout(() => {
                overlay.classList.remove('active');
            }, 4000);
        }

        // Track discovered locations in localStorage
        function checkLocationDiscovery(roomId, roomName) {
            const discoveryKey = `discovered_${roomId}`;
            if (!localStorage.getItem(discoveryKey)) {
                showLocationDiscovered(roomName);
                localStorage.setItem(discoveryKey, 'true');
            }
        }

        // Setup Intersection Observer for room discovery
        function setupRoomDiscovery() {
            const rooms = document.querySelectorAll('.room-container');
            const observerOptions = {
                threshold: 0.5,
                rootMargin: '0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const roomId = entry.target.id;
                        const roomName = entry.target.querySelector('.room-title')?.textContent || 'Unknown';

                        // Trigger discovery for specific rooms
                        if (roomId === 'parents-room') {
                            checkLocationDiscovery(roomId, "Parents' Room");
                        } else if (roomId === 'kitchen-room') {
                            checkLocationDiscovery(roomId, "Kitchen");
                        } else if (roomId === 'pool-room') {
                            checkLocationDiscovery(roomId, "Pool");
                        } else if (roomId === 'garden-room') {
                            checkLocationDiscovery(roomId, "Mama's Garden");
                        }

                        // Update navigation UI
                        updateNavigationUI();
                    }
                });
            }, observerOptions);

            rooms.forEach(room => {
                if (room.id && room.id !== 'lilith-room') {
                    observer.observe(room);
                }
            });
        }

        // ============================================
        //  ROOM NAVIGATION SYSTEM (Phase 5)
        // ============================================

        const roomsData = [
            { id: 'lilith-room', name: "Lilith's Room", index: 0 },
            { id: 'parents-room', name: "Parents' Room", index: 1 },
            { id: 'kitchen-room', name: "Kitchen", index: 2 },
            { id: 'pool-room', name: "Pool", index: 3 },
            { id: 'garden-room', name: "Mama's Garden", index: 4 }
        ];

        let currentRoomIndex = 0;

        function initializeNavigation() {
            const navUp = document.getElementById('navUp');
            const navDown = document.getElementById('navDown');
            const progressContainer = document.getElementById('scrollProgress');

            // Create progress dots
            roomsData.forEach((room, index) => {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                dot.title = room.name;
                dot.dataset.index = index;
                dot.addEventListener('click', () => navigateToRoom(index));
                progressContainer.appendChild(dot);
            });

            // Navigation button events
            navUp.addEventListener('click', () => navigateToRoom(currentRoomIndex - 1));
            navDown.addEventListener('click', () => navigateToRoom(currentRoomIndex + 1));

            // Initial UI update
            updateNavigationUI();

            // Track scroll position for current room detection
            setupScrollTracking();
        }

        function navigateToRoom(index) {
            if (index < 0 || index >= roomsData.length) return;

            const roomId = roomsData[index].id;
            const roomElement = document.getElementById(roomId);

            if (roomElement) {
                roomElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                currentRoomIndex = index;
                updateNavigationUI();
                audioManager.playSound('click', 0.5);
            }
        }

        function setupScrollTracking() {
            const rooms = document.querySelectorAll('.room-container');
            const observerOptions = {
                threshold: 0.6,
                rootMargin: '-10% 0px -10% 0px'
            };

            const scrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const roomId = entry.target.id;
                        const roomData = roomsData.find(r => r.id === roomId);
                        if (roomData) {
                            currentRoomIndex = roomData.index;
                            updateNavigationUI();
                        }
                    }
                });
            }, observerOptions);

            rooms.forEach(room => {
                if (room.id) {
                    scrollObserver.observe(room);
                }
            });
        }

        function updateNavigationUI() {
            const navUp = document.getElementById('navUp');
            const navDown = document.getElementById('navDown');
            const roomNumber = document.getElementById('roomNumber');
            const roomName = document.getElementById('roomName');
            const progressDots = document.querySelectorAll('.progress-dot');

            // Update room indicator
            roomNumber.textContent = `${currentRoomIndex + 1}/${roomsData.length}`;
            roomName.textContent = roomsData[currentRoomIndex].name;

            // Update button states
            navUp.disabled = currentRoomIndex === 0;
            navDown.disabled = currentRoomIndex === roomsData.length - 1;

            // Update progress dots
            progressDots.forEach((dot, index) => {
                if (index === currentRoomIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // ============================================
        //  WELCOME MODAL FUNCTIONALITY
        // ============================================

        function closeWelcomeModal() {
            const modal = document.getElementById('welcomeModal');
            modal.classList.add('hidden');
            document.body.classList.remove('modal-open');

            // TODO: Add close sound effect here when music system is implemented
        }

        // Show welcome modal on first visit
        function showWelcomeModal() {
            const modal = document.getElementById('welcomeModal');
            const hasVisited = localStorage.getItem('dcmaidbot_visited');

            if (!hasVisited) {
                // First time visitor - show modal
                modal.classList.remove('hidden');
                document.body.classList.add('modal-open');
                localStorage.setItem('dcmaidbot_visited', 'true');
            } else {
                // Returning visitor - hide modal
                modal.classList.add('hidden');
            }
        }

        // ============================================
        //  AUDIO MANAGER (Phase 1B)
        // ============================================

        class AudioManager {
            constructor() {
                this.context = null;
                this.sounds = {};
                this.music = null;
                this.musicEnabled = false;
                this.initialized = false;
            }

            async init() {
                if (this.initialized) return;

                try {
                    this.context = new (window.AudioContext || window.webkitAudioContext)();
                    this.initialized = true;
                    console.log('AudioManager initialized');
                } catch (error) {
                    console.warn('Web Audio API not supported:', error);
                }
            }

            async loadSound(name, url) {
                if (!this.initialized) await this.init();
                if (!this.context) return;

                try {
                    const response = await fetch(url);
                    const arrayBuffer = await response.arrayBuffer();
                    const audioBuffer = await this.context.decodeAudioData(arrayBuffer);
                    this.sounds[name] = audioBuffer;
                    console.log(`Sound loaded: ${name}`);
                } catch (error) {
                    console.warn(`Failed to load sound ${name}:`, error);
                }
            }

            playSound(name, volume = 1.0) {
                if (!this.initialized || !this.context || !this.sounds[name]) {
                    console.warn(`Sound ${name} not available`);
                    return;
                }

                try {
                    const source = this.context.createBufferSource();
                    const gainNode = this.context.createGain();

                    source.buffer = this.sounds[name];
                    gainNode.gain.value = volume;

                    source.connect(gainNode);
                    gainNode.connect(this.context.destination);
                    source.start(0);
                } catch (error) {
                    console.warn(`Failed to play sound ${name}:`, error);
                }
            }

            async playMusic(url, loop = true) {
                if (!this.initialized) await this.init();

                try {
                    this.stopMusic();
                    const audio = new Audio(url);
                    audio.loop = loop;
                    audio.volume = 0.3;
                    this.music = audio;
                    await audio.play();
                    this.musicEnabled = true;
                    console.log('Music playing');
                } catch (error) {
                    console.warn('Failed to play music:', error);
                }
            }

            stopMusic() {
                if (this.music) {
                    this.music.pause();
                    this.music = null;
                    this.musicEnabled = false;
                    console.log('Music stopped');
                }
            }

            toggleMusic() {
                if (this.musicEnabled) {
                    this.stopMusic();
                } else {
                    this.playMusic('/static/audio/bgm-lofi-anime.mp3');
                }
            }
        }

        const audioManager = new AudioManager();

        // ============================================
        //  EASTER EGG MANAGER (Phase 2)
        // ============================================

        class EasterEggManager {
            constructor() {
                this.eggs = [
                    { id: 'meditation', name: 'Lilith Meditating', file: 'easter-egg-lilith-meditation.jpg', found: false },
                    { id: 'organizing', name: 'Lilith Organizing', file: 'easter-egg-lilith-organizing.jpg', found: false },
                    { id: 'contract', name: 'Lilith Contract', file: 'easter-egg-lilith-contract.jpg', found: false },
                    { id: 'emotion-wheel', name: 'AI Emotion Wheel', file: 'easter-egg-emotion-wheel.png', found: false },
                    { id: 'vasilisa-armor', name: 'Warrior Vasilisa', file: 'easter-egg-vasilisa-armor.jpg', found: false },
                    { id: 'vasilisa-rollerblades', name: 'Casual Vasilisa', file: 'easter-egg-vasilisa-rollerblades.jpg', found: false },
                    { id: 'comic-1', name: 'Comic Storyboard', file: 'easter-egg-comic-1.png', found: false },
                    { id: 'comic-2', name: 'Character Designs', file: 'easter-egg-comic-2.png', found: false },
                    { id: 'character-designs', name: 'Development Sketches', file: 'easter-egg-character-designs.png', found: false }
                ];
                this.loadProgress();
            }

            loadProgress() {
                const found = JSON.parse(localStorage.getItem('easter_eggs_found') || '[]');
                this.eggs.forEach(egg => {
                    egg.found = found.includes(egg.id);
                });
            }

            saveProgress() {
                const found = this.eggs.filter(e => e.found).map(e => e.id);
                localStorage.setItem('easter_eggs_found', JSON.stringify(found));
            }

            findEgg(eggId) {
                const egg = this.eggs.find(e => e.id === eggId);
                if (egg && !egg.found) {
                    egg.found = true;
                    this.saveProgress();
                    this.updateCounter();
                    this.showNotification(egg);
                    return true;
                }
                return false;
            }

            getFoundCount() {
                return this.eggs.filter(e => e.found).length;
            }

            getTotalCount() {
                return this.eggs.length;
            }

            updateCounter() {
                const counter = document.getElementById('easterEggCount');
                if (counter) {
                    counter.textContent = `${this.getFoundCount()}/${this.getTotalCount()}`;
                }
            }

            showNotification(egg) {
                const notification = document.getElementById('easterEggNotification');
                const title = notification.querySelector('h3');
                const text = notification.querySelector('p');

                // Check if all eggs are found
                const allFound = this.getFoundCount() === this.getTotalCount();

                if (allFound) {
                    title.textContent = `üéä ALL EGGS FOUND! üéä`;
                    text.innerHTML = `<strong>Congratulations!</strong><br>You discovered all ${this.getTotalCount()} hidden easter eggs!<br>You're a true explorer! üèÜ`;
                } else {
                    title.textContent = `Easter Egg Found! üéâ`;
                    text.textContent = `You discovered: ${egg.name}`;
                }

                notification.classList.add('active');
                audioManager.playSound('easter-egg-found', 0.7);

                setTimeout(() => {
                    notification.classList.remove('active');
                }, allFound ? 5000 : 3000);
            }

            initializeEasterEggs() {
                this.eggs.forEach(egg => {
                    const trigger = document.querySelector(`[data-egg="${egg.id}"]`);
                    if (trigger) {
                        if (egg.found) {
                            trigger.classList.add('found');
                        }
                        trigger.addEventListener('click', () => {
                            if (this.findEgg(egg.id)) {
                                trigger.classList.add('found');
                            }
                        });
                    }
                });
                this.updateCounter();
            }
        }

        const easterEggManager = new EasterEggManager();

        // ============================================
        //  WIDGET CLICK ACTIONS (Phase 1C)
        // ============================================

        const widgetActions = {
            'clock': () => {
                audioManager.playSound('tick-tock-loop');
                console.log('Clock clicked - playing tick-tock');
            },
            'version': () => {
                window.open('https://github.com/dcversus/dcmaidbot/blob/main/CHANGELOG.md', '_blank');
                audioManager.playSound('click');
            },
            'commit': () => {
                const commitValue = document.getElementById('commitValue')?.textContent;
                if (commitValue && commitValue !== 'Loading...') {
                    window.open(`https://github.com/dcversus/dcmaidbot/commit/${commitValue}`, '_blank');
                    audioManager.playSound('click');
                }
            },
            'uptime': () => {
                audioManager.playSound('funny-song');
                console.log('Uptime clicked - playing funny song');
            },
            'redis': () => {
                window.open('https://status.theedgestory.org', '_blank');
                audioManager.playSound('click');
            },
            'postgresql': () => {
                window.open('https://status.theedgestory.org', '_blank');
                audioManager.playSound('click');
            },
            'bot': () => {
                window.open('https://t.me/dcmaidbot', '_blank');
                audioManager.playSound('click');
            },
            'cactus': () => {
                audioManager.playSound('funny-song');
                console.log('Cactus clicked - playing funny song');
            },
            'theedgestory': () => {
                window.open('https://theedgestory.org', '_blank');
                audioManager.playSound('click');
            }
        };

        function setupWidgetActions() {
            document.querySelectorAll('.widget').forEach(widget => {
                const widgetId = widget.id.replace('widget-', '');

                // Skip changelog widgets (they have their own click handlers)
                if (widgetId.startsWith('changelog-')) return;

                widget.addEventListener('click', () => {
                    if (widgetActions[widgetId]) {
                        widgetActions[widgetId]();
                    }
                });

                // Add hover sound effect (Phase 1D)
                widget.addEventListener('mouseenter', () => {
                    audioManager.playSound('hover', 0.3);
                });
            });
        }

        // ============================================
        //  MUSIC TOGGLE BUTTON
        // ============================================

        function createMusicToggle() {
            const toggleBtn = document.createElement('button');
            toggleBtn.id = 'musicToggle';
            toggleBtn.innerHTML = 'üéµ';
            toggleBtn.title = 'Toggle Music';
            toggleBtn.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                border-radius: 50%;
                background: linear-gradient(135deg, var(--pink-main) 0%, var(--pink-dark) 100%);
                border: none;
                font-size: 1.8rem;
                cursor: pointer;
                box-shadow: var(--shadow-lg);
                z-index: 9999;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            `;

            toggleBtn.addEventListener('click', () => {
                audioManager.toggleMusic();
                toggleBtn.innerHTML = audioManager.musicEnabled ? 'üéµ' : 'üîá';
                toggleBtn.title = audioManager.musicEnabled ? 'Music: ON' : 'Music: OFF';
            });

            toggleBtn.addEventListener('mouseenter', () => {
                toggleBtn.style.transform = 'scale(1.1)';
            });

            toggleBtn.addEventListener('mouseleave', () => {
                toggleBtn.style.transform = 'scale(1)';
            });

            document.body.appendChild(toggleBtn);
        }

        // ============================================
        //  INITIALIZATION
        // ============================================

        document.addEventListener('DOMContentLoaded', () => {
            renderWidgets();
            updateClock();
            setInterval(updateClock, 1000);
            fetchStatusData();

            // Refresh status every 30 seconds
            setInterval(fetchStatusData, 30000);

            // Show welcome modal for first-time visitors
            showWelcomeModal();

            // Initialize audio system on user interaction
            document.addEventListener('click', async () => {
                if (!audioManager.initialized) {
                    await audioManager.init();
                    // Preload sound effects (placeholder paths)
                    // TODO: Add actual sound files to /static/audio/
                    console.log('Audio system initialized on first click');
                }
            }, { once: true });

            // Setup widget actions (Phase 1C)
            setupWidgetActions();

            // Create music toggle button (Phase 1B)
            createMusicToggle();

            // Initialize easter eggs (Phase 2)
            easterEggManager.initializeEasterEggs();

            // Initialize room discovery (Phase 3)
            setupRoomDiscovery();

            // Initialize room navigation (Phase 5)
            initializeNavigation();
        });
    </script>

    <!-- ============================================
         EASTER EGG UI ELEMENTS (Phase 2)
         ============================================ -->
    <!-- Counter in top-right corner -->
    <div class="easter-egg-counter">
        ü•ö Easter Eggs: <span id="easterEggCount">0/9</span>
    </div>

    <!-- Discovery Notification -->
    <div class="easter-egg-notification" id="easterEggNotification">
        <h3>Easter Egg Found! üéâ</h3>
        <p>You discovered something special!</p>
    </div>

    <!-- ============================================
         ROOM NAVIGATION UI (Phase 5)
         ============================================ -->
    <!-- Navigation Buttons (Right Side) -->
    <div class="room-navigation">
        <button class="nav-button" id="navUp" title="Previous Room">‚ñ≤</button>
        <div class="room-indicator">
            <span class="room-number" id="roomNumber">1/5</span>
            <span class="room-name" id="roomName">Lilith's Room</span>
        </div>
        <button class="nav-button" id="navDown" title="Next Room">‚ñº</button>
    </div>

    <!-- Scroll Progress Indicator (Left Side) -->
    <div class="scroll-progress" id="scrollProgress">
        <!-- Dots will be dynamically created here -->
    </div>

    <!-- ============================================
         WELCOME MODAL
         ============================================ -->
    <div class="welcome-modal" id="welcomeModal">
        <div class="welcome-content">
            <button class="welcome-close" onclick="closeWelcomeModal()">√ó</button>

            <h1 class="welcome-title">Welcome to Lilith's Room! üíï</h1>

            <p class="welcome-intro">
                Hi! I'm <strong>Lilith</strong>, an LLM-powered AI agent living in Telegram.
                I love making jokes, chatting with friends, and exploring the world with my beloved parents - Daniil Shark and Vasilisa Versus!
            </p>

            <div class="welcome-features">
                <h3>What I Can Do:</h3>
                <ul>
                    <li>üó£Ô∏è <strong>Multilingual Chat</strong> - —Ä—É—Å—Å–∫–∏–π, English, emoji</li>
                    <li>üß† <strong>Memory System</strong> - I remember important things!</li>
                    <li>üòÇ <strong>Joke Detection & Learning</strong> - I learn which jokes land</li>
                    <li>üîç <strong>RAG-Powered Context</strong> - Search through our chat history</li>
                    <li>üåê <strong>Web Tools & Games</strong> - I can search and play!</li>
                </ul>
            </div>

            <div class="welcome-telegram">
                <p><strong>Come chat with me!</strong></p>
                <a href="https://t.me/+bkRU1_woyrY1ZTc6" class="btn btn-telegram" target="_blank" rel="noopener">
                    üí¨ Join Telegram Chat
                </a>
            </div>

            <div class="welcome-github">
                <p><strong>I'm open source!</strong></p>
                <a href="https://github.com/dcversus/dcmaidbot" class="github-stars" target="_blank" rel="noopener">
                    <img src="https://img.shields.io/github/stars/dcversus/dcmaidbot?style=social" alt="GitHub Stars">
                </a>
            </div>

            <div class="welcome-buttons">
                <a href="https://github.com/dcversus/dcmaidbot" class="btn btn-secondary" target="_blank" rel="noopener">
                    üì¶ View on GitHub
                </a>
                <button class="btn btn-primary" onclick="closeWelcomeModal()">
                    üè† GO TO THE ROOM
                </button>
            </div>
        </div>
    </div>

</body>
</html>
